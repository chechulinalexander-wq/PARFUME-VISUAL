# üîÑ –ó–∞–º–µ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤–æ–µ

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ **62.113.106.10** —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- üî¥ **Perfume Publisher** (–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ PARFUME BOT AND PARSE)
- URL: http://62.113.106.10
- –ü—É—Ç—å: `/opt/perfume-publisher`

–ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
- üü¢ **Perfume Visual Generator** (—Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç)
- –ü—É—Ç—å: `/opt/perfume-visual`

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–º–µ–Ω–∞ (1 –∫–æ–º–∞–Ω–¥–∞)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@62.113.106.10
```

### –®–∞–≥ 2: –°–∫–∞—á–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–º–µ–Ω—ã

```bash
wget https://raw.githubusercontent.com/chechulinalexander-wq/PARFUME-VISUAL/master/replace_old_app.sh
chmod +x replace_old_app.sh
bash replace_old_app.sh
```

### –®–∞–≥ 3: –í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á–∏

–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç, –≤–≤–µ–¥–∏—Ç–µ:
- **OpenAI API Key**
- **Replicate API Token**
- **Telegram Bot Token**
- **Telegram Channel ID**

### –®–∞–≥ 4: –ì–æ—Ç–æ–≤–æ!

–û—Ç–∫—Ä–æ–π—Ç–µ http://62.113.106.10 ‚Äî —Ç–∞–º –±—É–¥–µ—Ç –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ! üéâ

---

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

‚úÖ **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (perfume-app, perfume-publisher)  
‚úÖ **–£–¥–∞–ª—è–µ—Ç** —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Supervisor –∏ Nginx  
‚úÖ **–°–æ–∑–¥–∞—ë—Ç backup** —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `/opt/backups/`  
‚úÖ **–ö–ª–æ–Ω–∏—Ä—É–µ—Ç** –Ω–æ–≤—ã–π –∫–æ–¥ –∏–∑ GitHub  
‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç** Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ  
‚úÖ **–°–æ–∑–¥–∞—ë—Ç** –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏  
‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç** Nginx –∏ Supervisor  
‚úÖ **–ó–∞–ø—É—Å–∫–∞–µ—Ç** –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç  

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã

### –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**http://62.113.106.10**

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å "Perfume Visual Generator"
- ‚úÖ –°–µ–∫—Ü–∏—è "AI Processing Prompts"
- ‚úÖ –ü–æ–ª–µ "Background Stylization Prompt"
- ‚úÖ –ü–æ–ª–µ "Caption Generation Prompt"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üíæ Save Settings"
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ Randewoo Products

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@62.113.106.10

# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
supervisorctl status perfume-visual

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: RUNNING

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫)
tail -20 /var/log/perfume-visual/error.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
systemctl status nginx
```

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –ù–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
|----------|-------------------|------------------|
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | Perfume Publisher | Perfume Visual Generator |
| **–ü—É—Ç—å** | `/opt/perfume-publisher` | `/opt/perfume-visual` |
| **Supervisor** | `perfume-app` | `perfume-visual` |
| **–ü–æ—Ä—Ç** | 8000 | 8080 |
| **WSGI** | web_app:app | app:app |
| **–§—É–Ω–∫—Ü–∏–∏** | –ë–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–≤–∏–¥–µ–æ |
| **–ü—Ä–æ–º–ø—Ç—ã** | –•–∞—Ä–¥–∫–æ–¥ | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ (–≤ –ë–î) |
| **API** | OpenAI | OpenAI + Replicate |

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
ssh root@62.113.106.10
supervisorctl restart perfume-visual
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

```bash
ssh root@62.113.106.10
tail -f /var/log/perfume-visual/error.log
```

### –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

```bash
ssh root@62.113.106.10
cd /opt/perfume-visual
git pull origin master
supervisorctl restart perfume-visual
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
ssh root@62.113.106.10
supervisorctl status perfume-visual
curl -I http://localhost:8080
```

---

## üîô –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
ssh root@62.113.106.10

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
supervisorctl stop perfume-visual

# –ù–∞–π—Ç–∏ backup
ls -lt /opt/backups/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∑–∞–º–µ–Ω–∏—Ç–µ –¥–∞—Ç—É –Ω–∞ –≤–∞—à—É)
mv /opt/perfume-visual /opt/perfume-visual-failed
mv /opt/backups/perfume-publisher-20251101_123456 /opt/perfume-publisher

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# ... (—Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –≤ backup)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
supervisorctl start perfume-app
```

---

## üì¶ –ì–¥–µ –±—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–¥–µ—Å—å:

```
/opt/backups/perfume-publisher-YYYYMMDD_HHMMSS/
```

–ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –∫–æ–≥–¥–∞ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–æ–≤–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
rm -rf /opt/backups/perfume-publisher-*
```

---

## üêõ Troubleshooting

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
tail -50 /var/log/perfume-visual/error.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ supervisor
supervisorctl status

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
cd /opt/perfume-visual
source venv/bin/activate
python app.py
```

### Nginx –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 Bad Gateway

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
supervisorctl status perfume-visual

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
lsof -i :8080

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
supervisorctl restart perfume-visual
```

### –°—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã supervisor
supervisorctl status

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å—ë —Å—Ç–∞—Ä–æ–µ
supervisorctl stop perfume-app
supervisorctl stop perfume-publisher
supervisorctl stop web_app

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
rm -f /etc/supervisor/conf.d/perfume-app.conf
rm -f /etc/supervisor/conf.d/perfume-publisher.conf
supervisorctl reread
supervisorctl update
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞
ls -la /opt/perfume-visual/fragrantica_news.db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã
sqlite3 /opt/perfume-visual/fragrantica_news.db "SELECT name FROM sqlite_master WHERE type='table';"

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: global_settings, randewoo_products
```

---

## ‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–º–µ–Ω—ã

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~5-10 –º–∏–Ω—É—Ç

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É: 30 —Å–µ–∫
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞: 10 —Å–µ–∫
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞: 3-5 –º–∏–Ω
- –ü—Ä–æ–≤–µ—Ä–∫–∞: 1 –º–∏–Ω

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** `/var/log/perfume-visual/error.log`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:** `supervisorctl status`
3. **GitHub Issues:** https://github.com/chechulinalexander-wq/PARFUME-VISUAL/issues

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã

- [ ] –°—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –ù–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
- [ ] http://62.113.106.10 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –í–∏–¥–µ–Ω –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –ï—Å—Ç—å —Å–µ–∫—Ü–∏—è "AI Processing Prompts"
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –õ–æ–≥–∏ —á–∏—Å—Ç—ã–µ (–Ω–µ—Ç –æ—à–∏–±–æ–∫)
- [ ] Supervisor –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç RUNNING
- [ ] Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–º–µ–Ω—ã:

‚úÖ **–°—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤ –±—ç–∫–∞–ø–µ  
‚úÖ **–ù–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://62.113.106.10  
‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:** –î–æ—Å—Ç—É–ø–Ω—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≤–∏–¥–µ–æ, Telegram)  
‚úÖ **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö  

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üöÄ**

---

*–°–æ–∑–¥–∞–Ω–æ: 2025-11-01*  
*–°–µ—Ä–≤–µ—Ä: 62.113.106.10*  
*–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/chechulinalexander-wq/PARFUME-VISUAL*

