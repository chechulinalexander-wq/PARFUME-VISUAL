# Global Prompts Feature - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ Telegram –ø–æ—Å—Ç–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ **–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø—Ä–æ–º–ø—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –ø–∞—Ä—Ñ—é–º–∞–º, –Ω–æ –∏—Ö –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä—è–º–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `global_settings`:

```sql
CREATE TABLE global_settings (
    key TEXT PRIMARY KEY,
    value TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

–•—Ä–∞–Ω—è—Ç—Å—è –¥–≤–∞ –ø—Ä–æ–º–ø—Ç–∞:
- `prompt_stylize` - –ü—Ä–æ–º–ø—Ç –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Ñ–æ–Ω–∞ (Nano Banana / Gemini 2.5 Flash)
- `prompt_caption` - –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Telegram –ø–æ—Å—Ç–æ–≤ (Claude 4.5 Sonnet)

### API Endpoints

#### GET /api/settings/prompts
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∏–∑ –ë–î.

**Response:**
```json
{
    "success": true,
    "prompts": {
        "stylize": "Transform this perfume bottle...",
        "caption": "–°–æ–∑–¥–∞–π –ø—Ä–æ–¥–∞—é—â–∏–π –ø–æ—Å—Ç..."
    }
}
```

#### POST /api/settings/prompts
–û–±–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –ë–î.

**Request:**
```json
{
    "prompt_stylize": "Your new stylization prompt...",
    "prompt_caption": "Your new caption prompt..."
}
```

**Response:**
```json
{
    "success": true,
    "message": "Prompts updated successfully"
}
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í —Ñ–æ—Ä–º–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ **"Show Prompts"**
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –¥–≤–∞ –ø—Ä–æ–º–ø—Ç–∞, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑ –ë–î:
   - **Background Stylization Prompt** (Nano Banana)
   - **Caption Generation Prompt** (Claude)

### 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ü–∏—é –ø—Ä–æ–º–ø—Ç–æ–≤
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø—Ä—è–º–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –ø–æ–ª–µ
3. –ù–∞–∂–º–∏—Ç–µ **"üíæ Save Settings"**
4. –ü—Ä–æ–º–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ –≤—Å–µ–º –ø–∞—Ä—Ñ—é–º–∞–º

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

#### –í –ø—Ä–æ–º–ø—Ç–µ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ (prompt_stylize):
- `{DESCRIPTION}` - –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä—Ñ—é–º–∞

**–ü—Ä–∏–º–µ—Ä:**
```
Create a beautiful atmospheric background that captures the mood and essence of this fragrance: {DESCRIPTION}
```

#### –í –ø—Ä–æ–º–ø—Ç–µ –¥–ª—è Telegram (prompt_caption):
- `{BRAND}` - –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –±—Ä–µ–Ω–¥
- `{PERFUME_NAME}` - –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä—Ñ—é–º–∞
- `{DESCRIPTION}` - –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:**
```
–°–æ–∑–¥–∞–π –ø—Ä–æ–¥–∞—é—â–∏–π –ø–æ—Å—Ç –¥–ª—è Telegram –∫–∞–Ω–∞–ª–∞ –æ –ø–∞—Ä—Ñ—é–º–µ {BRAND} {PERFUME_NAME}.

–û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä–æ–º–∞—Ç–∞: {DESCRIPTION}
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Frontend (app.js)

- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `loadGlobalPrompts()`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏–∑ –ë–î —á–µ—Ä–µ–∑ API
- –ü—Ä–æ–º–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `this.globalPrompts`
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Save Settings" –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleSavePrompts()`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –ë–î
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Telegram –ø–æ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç –∏–∑ `this.globalPrompts.caption` —Å –∑–∞–º–µ–Ω–æ–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

### Backend (app.py)

- `api_get_prompts()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `global_settings`
- `api_update_prompts()` - –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `global_settings`
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `prompt_stylize` –∏–∑ —Ñ–æ—Ä–º—ã (–∫–æ—Ç–æ—Ä–æ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –ë–î)

### Database

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ. –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –æ–¥–∏–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Ñ—é–º–æ–≤  
‚úÖ **–õ–µ–≥–∫–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä—è–º–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞  
‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–µ `updated_at` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –≤—Å–µ –ø–∞—Ä—Ñ—é–º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞  

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ù–∞–∂–º–∏—Ç–µ "Show Prompts"
3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç—ã
4. –ù–∞–∂–º–∏—Ç–µ "üíæ Save Settings"

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ SQL:

```sql
UPDATE global_settings 
SET value = 'Your new prompt here', 
    updated_at = CURRENT_TIMESTAMP 
WHERE key = 'prompt_stylize';
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –ë–î –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ –ø—Ä–æ–º–ø—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (fallback).

---

**–ê–≤—Ç–æ—Ä:** Perfume Visual Generator Team  
**–î–∞—Ç–∞:** 2025-11-01

